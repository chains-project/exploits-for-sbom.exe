package org.example;

import com.turn.ttorrent.client.SimpleClient;
import org.openjdk.jmh.annotations.Benchmark;
import org.openjdk.jmh.annotations.BenchmarkMode;
import org.openjdk.jmh.annotations.Mode;


import java.io.IOException;
import java.net.InetAddress;
import java.nio.file.Path;


public class Main {

    public static void main(String[] args) throws IOException {
        org.openjdk.jmh.Main.main(args);
    }

    @Benchmark
    @BenchmarkMode(Mode.All)
    public void ttorrent() throws Exception {
        SimpleClient client = new SimpleClient();
        InetAddress address = InetAddress.getLocalHost();
        try {
            client.downloadTorrent(Path.of("src/main/resources/test_folder.torrent").toFile().getAbsolutePath(),
                    Path.of("target").toFile().getAbsolutePath(),
                    address);
        } catch (Exception e) {
            //download failed, see exception for details
            e.printStackTrace();
        }
        client.stop();
    }
}